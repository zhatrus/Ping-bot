# Telegram IP Monitor Bot

Бот для моніторингу IP-адрес через Telegram. Бот пінгує задані IP-адреси та повідомляє про їх статус.

## Технічна Архітектура

### Основні компоненти
- **Node.js** як основна платформа
- **Telegraf** для взаємодії з Telegram API
- **LowDB** для локального зберігання даних
- Нативні системні команди для пінгу через `child_process`

### Структура проекту
```
src/
├── bot.js          # Конфігурація бота
├── config.js       # Налаштування
├── db.js          # Робота з базою даних
├── index.js       # Точка входу
├── ping.js        # Логіка пінгування
├── utils.js       # Допоміжні функції
└── handlers/      # Обробники команд
    ├── actions.js
    ├── commands.js
    ├── messages.js
    └── index.js
```

### Основні команди бота
- `/add` - Додати IP-адреси для моніторингу
- `/dell` - Видалити IP-адреси з моніторингу
- Інтерактивні кнопки для підтвердження дій

## Встановлення та Налаштування

### Передумови
- Node.js (версія 14 або вище)
- npm (менеджер пакетів Node.js)
- Доступ до серверу з Linux або Windows
- Токен бота Telegram (отримати у [@BotFather](https://t.me/BotFather))

### Кроки встановлення

1. **Клонування репозиторію**
   ```bash
   git clone [URL репозиторію]
   cd telegram-ping-bot
   ```

2. **Встановлення залежностей**
   ```bash
   npm install
   ```

3. **Налаштування змінних середовища**
   Створіть файл `.env` в корені проекту:
   ```
   BOT_TOKEN=ваш_токен_бота
   ADMIN_ID=ваш_telegram_id
   ```

4. **Запуск бота**
   ```bash
   npm start
   ```

### Розгортання на сервері

1. **Підготовка серверу**
   - Встановіть Node.js та npm
   - Налаштуйте firewall для дозволу ICMP (ping)
   
2. **Перенесення файлів**
   - Скопіюйте всі файли проекту на сервер
   - Можна використати git clone або scp

3. **Налаштування PM2 (рекомендовано)**
   ```bash
   npm install -g pm2
   pm2 start src/index.js --name "ping-bot"
   pm2 save
   pm2 startup
   ```

4. **Перевірка роботи**
   - Надішліть команду `/start` боту
   - Спробуйте додати тестову IP-адресу

## Особливості та обмеження

- Бот використовує MarkdownV2 для форматування повідомлень
- Спеціальні символи в повідомленнях автоматично екрануються
- Таймаут для пінг-операцій встановлено на 15 секунд
- Різні параметри пінгу для Windows та Linux систем

## Технічне обслуговування

### Логи та моніторинг
- Перевіряйте логи через `pm2 logs ping-bot`
- Моніторте використання пам'яті: `pm2 monit`

### Оновлення
1. Зупиніть бота: `pm2 stop ping-bot`
2. Оновіть код з репозиторію
3. Встановіть нові залежності: `npm install`
4. Перезапустіть бота: `pm2 restart ping-bot`

### Резервне копіювання
- Регулярно робіть бекап файлів даних з `src/data/`
- Зберігайте копію файлу `.env`
